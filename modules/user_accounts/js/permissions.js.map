{"version":3,"sources":["webpack:///modules/user_accounts/js/permissions.js","webpack:///webpack/bootstrap c1378706db6ef3bbfce4","webpack:///./modules/user_accounts/jsx/permissions.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","Role","React","createClass","displayName","handleCheck","this","props","onChange","handleMouseOver","onMouseOver","handleMouseOut","onMouseOut","render","textStyle","disabled","color","cursor","createElement","className","style","name","type","value","checked","RoleList","roleNodes","data","map","role","key","Permission","e","highlight","PermissionList","half","Math","ceil","length","firstHalf","slice","secondHalf","permissionNodesCol1","permission","permissionNodesCol2","Access","getInitialState","roles","permissions","rolesUsed","loadDataFromServer","$","ajax","url","dataURL","identifier","dataType","cache","success","setState","bind","error","xhr","status","err","console","toString","componentDidMount","componentWillUnmount","serverRequest","abort","getRoleIndex","roleID","state","index","i","getPermissionIndex","permissionID","calculateRoles","currentRoles","currentPermissions","roleIndex","j","permIndex","handleRoleChange","roleUpdate","currentState","permissionsToChange","permissionUpdate","permissionIndex","handleRoleMouseOver","permissionsToHighlight","permissionsUpdate","handleRoleMouseOut","handlePermissionChange","window","onload","access","loris","BaseURL","QueryString","get","ReactDOM","document","getElementById"],"mappings":"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","file":"./modules/user_accounts/js/permissions.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/* global ReactDOM */\n\t\n\tvar Role = React.createClass({\n\t  displayName: 'Role',\n\t\n\t  handleCheck: function handleCheck() {\n\t    this.props.onChange(this.props.id);\n\t  },\n\t  handleMouseOver: function handleMouseOver() {\n\t    this.props.onMouseOver(this.props.id);\n\t  },\n\t  handleMouseOut: function handleMouseOut() {\n\t    this.props.onMouseOut();\n\t  },\n\t  render: function render() {\n\t    var textStyle = {};\n\t    if (this.props.disabled) {\n\t      textStyle = {\n\t        color: '#ccc',\n\t        cursor: 'not-allowed'\n\t      };\n\t    }\n\t    return React.createElement(\n\t      'div',\n\t      {\n\t        className: 'checkbox role',\n\t        onMouseOver: this.handleMouseOver,\n\t        onMouseOut: this.handleMouseOut },\n\t      React.createElement(\n\t        'label',\n\t        { style: textStyle },\n\t        React.createElement('input', {\n\t          name: \"roleID[\" + this.props.id + \"]\",\n\t          type: 'checkbox',\n\t          value: this.props.id,\n\t          id: this.props.id,\n\t          checked: this.props.checked,\n\t          onChange: this.handleCheck,\n\t          disabled: this.props.disabled\n\t        }),\n\t        this.props.name\n\t      )\n\t    );\n\t  }\n\t});\n\t\n\tvar RoleList = React.createClass({\n\t  displayName: 'RoleList',\n\t\n\t  render: function render() {\n\t    var roleNodes = this.props.data.map(function (role) {\n\t      return React.createElement(Role, {\n\t        key: role.id,\n\t        name: role.name,\n\t        id: role.id,\n\t        checked: role.checked,\n\t        disabled: role.disabled,\n\t        onChange: this.props.onChange,\n\t        onMouseOver: this.props.onMouseOver,\n\t        onMouseOut: this.props.onMouseOut });\n\t    }, this);\n\t    return React.createElement(\n\t      'div',\n\t      { className: 'roleList' },\n\t      roleNodes\n\t    );\n\t  }\n\t});\n\t\n\tvar Permission = React.createClass({\n\t  displayName: 'Permission',\n\t\n\t  handleCheck: function handleCheck(e) {\n\t    this.props.onChange(this.props.id);\n\t  },\n\t  render: function render() {\n\t    var textStyle = {};\n\t    if (this.props.disabled) {\n\t      textStyle = {\n\t        color: '#ccc',\n\t        cursor: 'not-allowed'\n\t      };\n\t    }\n\t    if (this.props.highlight) {\n\t      textStyle = {\n\t        color: 'lightblue'\n\t      };\n\t    }\n\t    return React.createElement(\n\t      'div',\n\t      { className: 'checkbox permission' },\n\t      React.createElement(\n\t        'label',\n\t        { style: textStyle },\n\t        React.createElement('input', {\n\t          name: \"permID[\" + this.props.id + \"]\",\n\t          type: 'checkbox',\n\t          value: this.props.id,\n\t          checked: this.props.checked,\n\t          onChange: this.handleCheck,\n\t          disabled: this.props.disabled\n\t        }),\n\t        this.props.name\n\t      )\n\t    );\n\t  }\n\t});\n\t\n\tvar PermissionList = React.createClass({\n\t  displayName: 'PermissionList',\n\t\n\t  render: function render() {\n\t    var half = Math.ceil(this.props.data.length / 2);\n\t    var firstHalf = this.props.data.slice(0, half);\n\t    var secondHalf = this.props.data.slice(half, this.props.data.length);\n\t    var permissionNodesCol1 = firstHalf.map(function (permission) {\n\t      return React.createElement(Permission, {\n\t        key: permission.id,\n\t        id: permission.id,\n\t        name: permission.name,\n\t        highlight: permission.highlight,\n\t        checked: permission.checked,\n\t        onChange: this.props.onChange,\n\t        disabled: permission.disabled });\n\t    }, this);\n\t    var permissionNodesCol2 = secondHalf.map(function (permission) {\n\t      return React.createElement(Permission, {\n\t        key: permission.id,\n\t        id: permission.id,\n\t        name: permission.name,\n\t        highlight: permission.highlight,\n\t        checked: permission.checked,\n\t        onChange: this.props.onChange,\n\t        disabled: permission.disabled });\n\t    }, this);\n\t    return React.createElement(\n\t      'div',\n\t      { className: 'row' },\n\t      React.createElement(\n\t        'div',\n\t        { className: 'col-md-6' },\n\t        permissionNodesCol1\n\t      ),\n\t      React.createElement(\n\t        'div',\n\t        { className: 'col-md-6' },\n\t        permissionNodesCol2\n\t      )\n\t    );\n\t  }\n\t});\n\t\n\tvar Access = React.createClass({\n\t  displayName: 'Access',\n\t\n\t  getInitialState: function getInitialState() {\n\t    return {\n\t      roles: [],\n\t      permissions: [],\n\t      rolesUsed: true\n\t    };\n\t  },\n\t  loadDataFromServer: function loadDataFromServer() {\n\t    $.ajax({\n\t      url: this.props.dataURL,\n\t      data: { identifier: this.props.identifier },\n\t      dataType: 'json',\n\t      cache: false,\n\t      success: function (data) {\n\t        if (data.roles.length) {\n\t          this.setState({\n\t            roles: data.roles,\n\t            permissions: data.permissions\n\t          });\n\t        } else {\n\t          this.setState({\n\t            roles: data.roles,\n\t            permissions: data.permissions,\n\t            rolesUsed: false\n\t          });\n\t        }\n\t      }.bind(this),\n\t      error: function (xhr, status, err) {\n\t        console.error(this.props.dataURL, status, err.toString());\n\t      }.bind(this)\n\t    });\n\t  },\n\t  componentDidMount: function componentDidMount() {\n\t    if (this.props.identifier) {\n\t      this.loadDataFromServer();\n\t    }\n\t  },\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    this.serverRequest.abort();\n\t  },\n\t  getRoleIndex: function getRoleIndex(roleID) {\n\t    var roles = this.state.roles;\n\t    var index = -1;\n\t    for (var i = 0; i < roles.length; i++) {\n\t      if (roles[i].id === roleID) {\n\t        index = i;\n\t        break;\n\t      }\n\t    }\n\t    return index;\n\t  },\n\t  getPermissionIndex: function getPermissionIndex(permissionID) {\n\t    var permissions = this.state.permissions;\n\t    var index = -1;\n\t    for (var i = 0; i < permissions.length; i++) {\n\t      if (permissions[i].id === permissionID) {\n\t        index = i;\n\t        break;\n\t      }\n\t    }\n\t    return index;\n\t  },\n\t  calculateRoles: function calculateRoles(roles, permissions) {\n\t    var currentRoles = roles;\n\t    var currentPermissions = permissions;\n\t\n\t    for (var i = 0; i < currentRoles.length; i++) {\n\t      var roleIndex = this.getRoleIndex(currentRoles[i].id);\n\t      var checked = true;\n\t      for (var j = 0; j < currentRoles[i].permissions.length; j++) {\n\t        var permIndex = this.getPermissionIndex(currentRoles[i].permissions[j].permissionID);\n\t        if (!currentPermissions[permIndex].checked) {\n\t          checked = false;\n\t          break;\n\t        }\n\t      }\n\t      currentRoles[roleIndex].checked = checked;\n\t    }\n\t\n\t    return roles;\n\t  },\n\t  handleRoleChange: function handleRoleChange(roleID) {\n\t    // get role update\n\t    var index = this.getRoleIndex(roleID);\n\t    var roleUpdate = this.state.roles;\n\t    var currentState = roleUpdate[index].checked;\n\t    roleUpdate[index].checked = !currentState;\n\t\n\t    // get permission update\n\t    var permissionsToChange = this.state.roles[index].permissions;\n\t    var permissionUpdate = this.state.permissions;\n\t\n\t    for (var i = 0; i < permissionsToChange.length; i++) {\n\t      var permissionIndex = this.getPermissionIndex(permissionsToChange[i].permissionID);\n\t      if (currentState) {\n\t        permissionUpdate[permissionIndex].checked = false;\n\t      } else {\n\t        permissionUpdate[permissionIndex].checked = true;\n\t      }\n\t    }\n\t\n\t    // Update roles in case where additional roles were granted with the new permissions\n\t    roleUpdate = this.calculateRoles(roleUpdate, permissionUpdate);\n\t\n\t    this.setState({\n\t      roles: roleUpdate,\n\t      permissions: permissionUpdate\n\t    });\n\t  },\n\t  handleRoleMouseOver: function handleRoleMouseOver(roleID) {\n\t    var index = this.getRoleIndex(roleID);\n\t    var permissionsToHighlight = this.state.roles[index].permissions;\n\t    var permissionsUpdate = this.state.permissions;\n\t\n\t    for (var i = 0; i < permissionsToHighlight.length; i++) {\n\t      var permissionIndex = this.getPermissionIndex(permissionsToHighlight[i].permissionID);\n\t      permissionsUpdate[permissionIndex].highlight = true;\n\t    }\n\t\n\t    this.setState({\n\t      permissions: permissionsUpdate\n\t    });\n\t  },\n\t  handleRoleMouseOut: function handleRoleMouseOut() {\n\t    var permissionsUpdate = this.state.permissions;\n\t\n\t    for (var i = 0; i < permissionsUpdate.length; i++) {\n\t      permissionsUpdate[i].highlight = false;\n\t    }\n\t\n\t    this.setState({\n\t      permissions: permissionsUpdate\n\t    });\n\t  },\n\t  handlePermissionChange: function handlePermissionChange(permissionID) {\n\t    // Set permission state\n\t    var index = this.getPermissionIndex(permissionID);\n\t    var permissionUpdate = this.state.permissions;\n\t    var currentState = permissionUpdate[index].checked;\n\t    permissionUpdate[index].checked = !currentState;\n\t\n\t    // Update roles if needed\n\t    if (this.state.rolesUsed) {\n\t      var roleUpdate = this.calculateRoles(this.state.roles, permissionUpdate);\n\t      this.setState({\n\t        roles: roleUpdate,\n\t        permissions: permissionUpdate\n\t      });\n\t    } else {\n\t      this.setState({\n\t        permissions: permissionUpdate\n\t      });\n\t    }\n\t  },\n\t  render: function render() {\n\t    if (this.state.rolesUsed) {\n\t      return React.createElement(\n\t        'div',\n\t        { className: 'Access' },\n\t        React.createElement(\n\t          'label',\n\t          { className: 'col-sm-2' },\n\t          'Access'\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-2' },\n\t          React.createElement(\n\t            'label',\n\t            null,\n\t            'Roles'\n\t          ),\n\t          React.createElement(RoleList, {\n\t            data: this.state.roles,\n\t            onChange: this.handleRoleChange,\n\t            onMouseOver: this.handleRoleMouseOver,\n\t            onMouseOut: this.handleRoleMouseOut })\n\t        ),\n\t        React.createElement(\n\t          'div',\n\t          { className: 'col-sm-8' },\n\t          React.createElement(\n\t            'label',\n\t            null,\n\t            'Permissions'\n\t          ),\n\t          React.createElement(PermissionList, {\n\t            data: this.state.permissions,\n\t            onChange: this.handlePermissionChange })\n\t        )\n\t      );\n\t    }\n\t    return React.createElement(\n\t      'div',\n\t      { className: 'Access' },\n\t      React.createElement(\n\t        'label',\n\t        { className: 'col-sm-2' },\n\t        'Access'\n\t      ),\n\t      React.createElement(\n\t        'div',\n\t        { className: 'col-sm-10' },\n\t        React.createElement(\n\t          'label',\n\t          null,\n\t          'Permissions'\n\t        ),\n\t        React.createElement(PermissionList, {\n\t          data: this.state.permissions,\n\t          onChange: this.handlePermissionChange })\n\t      )\n\t    );\n\t  }\n\t});\n\t\n\twindow.onload = function () {\n\t  var access = React.createElement(Access, {\n\t    dataURL: loris.BaseURL + '/user_accounts/ajax/getRolePermissionData.php',\n\t    identifier: QueryString.get().identifier\n\t  });\n\t\n\t  ReactDOM.render(access, document.getElementById(\"access\"));\n\t};\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// modules/user_accounts/js/permissions.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c1378706db6ef3bbfce4","/* global ReactDOM */\n\nvar Role = React.createClass({\n  handleCheck: function() {\n    this.props.onChange(this.props.id);\n  },\n  handleMouseOver: function() {\n    this.props.onMouseOver(this.props.id);\n  },\n  handleMouseOut: function() {\n    this.props.onMouseOut();\n  },\n  render: function() {\n    var textStyle = {};\n    if (this.props.disabled) {\n      textStyle = {\n        color: '#ccc',\n        cursor: 'not-allowed'\n      };\n    }\n    return (\n      <div\n        className=\"checkbox role\"\n        onMouseOver={this.handleMouseOver}\n        onMouseOut={this.handleMouseOut}>\n        <label style={textStyle}>\n          <input\n            name={\"roleID[\" + this.props.id + \"]\"}\n            type=\"checkbox\"\n            value={this.props.id}\n            id={this.props.id}\n            checked={this.props.checked}\n            onChange={this.handleCheck}\n            disabled={this.props.disabled}\n          />\n          {this.props.name}\n        </label>\n      </div>\n    );\n  }\n});\n\nvar RoleList = React.createClass({\n  render: function() {\n    var roleNodes = this.props.data.map(function(role) {\n      return (\n        <Role\n          key={role.id}\n          name={role.name}\n          id={role.id}\n          checked={role.checked}\n          disabled={role.disabled}\n          onChange={this.props.onChange}\n          onMouseOver={this.props.onMouseOver}\n          onMouseOut={this.props.onMouseOut} />\n      );\n    }, this);\n    return (\n      <div className=\"roleList\">\n        {roleNodes}\n      </div>\n    );\n  }\n});\n\nvar Permission = React.createClass({\n  handleCheck: function(e) {\n    this.props.onChange(this.props.id);\n  },\n  render: function() {\n    var textStyle = {};\n    if (this.props.disabled) {\n      textStyle = {\n        color: '#ccc',\n        cursor: 'not-allowed'\n      };\n    }\n    if (this.props.highlight) {\n      textStyle = {\n        color: 'lightblue'\n      };\n    }\n    return (\n      <div className=\"checkbox permission\">\n        <label style={textStyle}>\n          <input\n            name={\"permID[\" + this.props.id + \"]\"}\n            type=\"checkbox\"\n            value={this.props.id}\n            checked={this.props.checked}\n            onChange={this.handleCheck}\n            disabled={this.props.disabled}\n          />\n          {this.props.name}\n        </label>\n      </div>\n    );\n  }\n});\n\nvar PermissionList = React.createClass({\n  render: function() {\n    var half = Math.ceil(this.props.data.length / 2);\n    var firstHalf = this.props.data.slice(0, half);\n    var secondHalf = this.props.data.slice(half, this.props.data.length);\n    var permissionNodesCol1 = firstHalf.map(function(permission) {\n      return (\n        <Permission\n          key={permission.id}\n          id={permission.id}\n          name={permission.name}\n          highlight={permission.highlight}\n          checked={permission.checked}\n          onChange={this.props.onChange}\n          disabled={permission.disabled} />\n      );\n    }, this);\n    var permissionNodesCol2 = secondHalf.map(function(permission) {\n      return (\n        <Permission\n          key={permission.id}\n          id={permission.id}\n          name={permission.name}\n          highlight={permission.highlight}\n          checked={permission.checked}\n          onChange={this.props.onChange}\n          disabled={permission.disabled} />\n      );\n    }, this);\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          {permissionNodesCol1}\n        </div>\n        <div className=\"col-md-6\">\n          {permissionNodesCol2}\n        </div>\n      </div>\n    );\n  }\n});\n\nvar Access = React.createClass({\n  getInitialState: function() {\n    return {\n      roles: [],\n      permissions: [],\n      rolesUsed: true\n    };\n  },\n  loadDataFromServer: function() {\n    $.ajax({\n      url: this.props.dataURL,\n      data: {identifier: this.props.identifier},\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n        if (data.roles.length) {\n          this.setState({\n            roles: data.roles,\n            permissions: data.permissions\n          });\n        } else {\n          this.setState({\n            roles: data.roles,\n            permissions: data.permissions,\n            rolesUsed: false\n          });\n        }\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.dataURL, status, err.toString());\n      }.bind(this)\n    });\n  },\n  componentDidMount: function() {\n    if (this.props.identifier) {\n      this.loadDataFromServer();\n    }\n  },\n  componentWillUnmount: function() {\n    this.serverRequest.abort();\n  },\n  getRoleIndex: function(roleID) {\n    var roles = this.state.roles;\n    var index = -1;\n    for (var i = 0; i < roles.length; i++) {\n      if (roles[i].id === roleID) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  },\n  getPermissionIndex: function(permissionID) {\n    var permissions = this.state.permissions;\n    var index = -1;\n    for (var i = 0; i < permissions.length; i++) {\n      if (permissions[i].id === permissionID) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  },\n  calculateRoles: function(roles, permissions) {\n    var currentRoles = roles;\n    var currentPermissions = permissions;\n\n    for (var i = 0; i < currentRoles.length; i++) {\n      var roleIndex = this.getRoleIndex(currentRoles[i].id);\n      var checked = true;\n      for (var j = 0; j < currentRoles[i].permissions.length; j++) {\n        var permIndex = this.getPermissionIndex(currentRoles[i].permissions[j].permissionID);\n        if (!currentPermissions[permIndex].checked) {\n          checked = false;\n          break;\n        }\n      }\n      currentRoles[roleIndex].checked = checked;\n    }\n\n    return roles;\n  },\n  handleRoleChange: function(roleID) {\n    // get role update\n    var index = this.getRoleIndex(roleID);\n    var roleUpdate = this.state.roles;\n    var currentState = roleUpdate[index].checked;\n    roleUpdate[index].checked = !currentState;\n\n    // get permission update\n    var permissionsToChange = this.state.roles[index].permissions;\n    var permissionUpdate = this.state.permissions;\n\n    for (var i = 0; i < permissionsToChange.length; i++) {\n      var permissionIndex = this.getPermissionIndex(permissionsToChange[i].permissionID);\n      if (currentState) {\n        permissionUpdate[permissionIndex].checked = false;\n      } else {\n        permissionUpdate[permissionIndex].checked = true;\n      }\n    }\n\n    // Update roles in case where additional roles were granted with the new permissions\n    roleUpdate = this.calculateRoles(roleUpdate, permissionUpdate);\n\n    this.setState({\n      roles: roleUpdate,\n      permissions: permissionUpdate\n    });\n  },\n  handleRoleMouseOver: function(roleID) {\n    var index = this.getRoleIndex(roleID);\n    var permissionsToHighlight = this.state.roles[index].permissions;\n    var permissionsUpdate = this.state.permissions;\n\n    for (var i = 0; i < permissionsToHighlight.length; i++) {\n      var permissionIndex = this.getPermissionIndex(permissionsToHighlight[i].permissionID);\n      permissionsUpdate[permissionIndex].highlight = true;\n    }\n\n    this.setState({\n      permissions: permissionsUpdate\n    });\n  },\n  handleRoleMouseOut: function() {\n    var permissionsUpdate = this.state.permissions;\n\n    for (var i = 0; i < permissionsUpdate.length; i++) {\n      permissionsUpdate[i].highlight = false;\n    }\n\n    this.setState({\n      permissions: permissionsUpdate\n    });\n  },\n  handlePermissionChange: function(permissionID) {\n    // Set permission state\n    var index = this.getPermissionIndex(permissionID);\n    var permissionUpdate = this.state.permissions;\n    var currentState = permissionUpdate[index].checked;\n    permissionUpdate[index].checked = !currentState;\n\n    // Update roles if needed\n    if (this.state.rolesUsed) {\n      var roleUpdate = this.calculateRoles(this.state.roles, permissionUpdate);\n      this.setState({\n        roles: roleUpdate,\n        permissions: permissionUpdate\n      });\n    } else {\n      this.setState({\n        permissions: permissionUpdate\n      });\n    }\n  },\n  render: function() {\n    if (this.state.rolesUsed) {\n      return (\n        <div className=\"Access\">\n          <label className=\"col-sm-2\">Access</label>\n          <div className=\"col-sm-2\">\n            <label>Roles</label>\n            <RoleList\n            data={this.state.roles}\n            onChange={this.handleRoleChange}\n            onMouseOver={this.handleRoleMouseOver}\n            onMouseOut={this.handleRoleMouseOut} />\n          </div>\n          <div className=\"col-sm-8\">\n            <label>Permissions</label>\n            <PermissionList\n            data={this.state.permissions}\n            onChange={this.handlePermissionChange} />\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"Access\">\n        <label className=\"col-sm-2\">Access</label>\n        <div className=\"col-sm-10\">\n          <label>Permissions</label>\n          <PermissionList\n          data={this.state.permissions}\n          onChange={this.handlePermissionChange} />\n        </div>\n      </div>\n    );\n  }\n});\n\nwindow.onload = function() {\n  var access = <Access\n    dataURL={`${loris.BaseURL}/user_accounts/ajax/getRolePermissionData.php`}\n    identifier={QueryString.get().identifier}\n  />;\n\n  ReactDOM.render(access, document.getElementById(\"access\"));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/user_accounts/jsx/permissions.js"],"sourceRoot":""}